# Shop REST API  

**Shop REST API** — это серверная часть интернет-магазина, предоставляющая REST API для управления аутентификацией, категориями, товарами, профилями, корзинами и заказами. Приложение разработано на **Express** с использованием **Prisma** для работы с базой данных PostgreSQL.  

## Возможности  

- **Аутентификация:** Регистрация, вход, выход из системы, обновление токенов.  
- **Управление категориями:** Добавление, обновление и удаление категорий товаров.  
- **Управление товарами:** Создание, обновление, удаление и получение списка товаров.  
- **Профиль пользователя:** Просмотр и редактирование профиля.  
- **Корзина:** Добавление, удаление и просмотр товаров в корзине.  
- **Заказы:** Создание заказов, просмотр истории заказов.  
- **Загрузка файлов:** Статическая раздача загруженных файлов через `/uploads`.  

## Используемые технологии  

- **Node.js** и **Express** для серверной логики.  
- **Prisma** для взаимодействия с базой данных PostgreSQL.  
- **PostgreSQL** как основная база данных.  
- **JWT** для аутентификации.  

## Установка и запуск  

### Предварительные требования  

Убедитесь, что у вас установлены:  
- Node.js (рекомендуется LTS-версия)  
- npm или yarn  
- PostgreSQL  

### Установка  

1. Клонируйте репозиторий:  
   ```bash  
   git clone https://github.com/your-username/shop-rest-api.git  
   cd shop-rest-api  
   ```  

2. Установите зависимости:  
   ```bash  
   npm install  
   ```  

3. Настройте базу данных с помощью Prisma:  
   - Настройте файл `prisma/schema.prisma`, указав подключение к базе данных PostgreSQL. Пример строки подключения:  
     ```prisma  
     datasource db {  
       provider = "postgresql"  
       url      = "postgresql://username:password@localhost:5432/database_name"  
     }  
     ```  
   - Выполните миграции:  
     ```bash  
     npx prisma migrate dev  
     ```  

4. Настройте файл `config.json`:  
   ```json  
   {  
     "PORT": 5000,  
     "ACCESS_SECRET": "jwt secret",  
     "REFRESH_SECRET": "jwt refresh secret",  
     "COOKIE_SECRET": "cookie secret"  
   }  
   ```  

5. Добавьте папку `uploads` для хранения загружаемых файлов:  
   ```bash  
   mkdir uploads  
   ```  

### Запуск сервера  

Запустите сервер с помощью команды:  
```bash  
npm start  
```  

Сервер будет доступен по адресу `http://localhost:5000`.  

## API Эндпоинты  

### Аутентификация  
- **POST /api/auth/register:** Регистрация нового пользователя.  
- **POST /api/auth/login:** Вход в аккаунт.  
- **POST /api/auth/refresh:** Обновление токена.  
- **POST /api/auth/logout:** Выход из аккаунта.  

### Категории  
- **GET /api/categories:** Получение всех категорий.  
- **POST /api/categories:** Создание новой категории.  
- **PUT /api/categories/:id:** Обновление категории.  
- **DELETE /api/categories/:id:** Удаление категории.  

### Товары  
- **GET /api/products:** Получение всех товаров.  
- **POST /api/products:** Создание нового товара.  
- **PUT /api/products/:id:** Обновление товара.  
- **DELETE /api/products/:id:** Удаление товара.  

### Профиль  
- **GET /api/profile:** Получение данных профиля.  
- **PUT /api/profile:** Обновление профиля.  

### Корзина  
- **GET /api/cart:** Получение товаров в корзине.  
- **POST /api/cart:** Добавление товара в корзину.  
- **DELETE /api/cart/:id:** Удаление товара из корзины.  

### Заказы  
- **GET /api/orders:** Получение истории заказов.  
- **POST /api/orders:** Создание нового заказа.  

### Статические файлы  
- **GET /uploads/:filename:** Доступ к загруженным файлам.  

## Разработка  

### Скрипты  
- **npm run dev:** Запуск сервера в режиме разработки.  
- **npm start:** Запуск сервера в режиме продакшн.  

### Работа с Prisma  
- **npx prisma studio:** Запуск веб-интерфейса для управления базой данных.  
- **npx prisma migrate dev:** Выполнение миграций.  
- **npx prisma generate:** Генерация Prisma Client.  
